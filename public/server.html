<html>
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" referrerpolicy="no-referrer" /><!-- pragma: allowlist secret -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js" integrity="sha512-FHsFVKQ/T1KWJDGSbrUhTJyS1ph3eRrxI228ND0EGaEp6v4a/vGwPWd3Dtd/+9cI7ccofZvl/wulICEurHN1pg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- pragma: allowlist secret -->
  <link rel="stylesheet" href="/docs/server/assets/style.css"/>
  <link rel="stylesheet" href="/docs/server/assets/highlight.css"/>
  <style>
    .sjpp-h3link {
      margin-left: 12px;
      font-size: 16px;
      font-weight: 300;
      color: #1f70c2;
      text-decoration: underline;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div class='docs-subheader'>
  <span class='code-snippet'>./docs/build.sh</span> # to regenerate
</div>
<div id='output' style='padding: 10px'>
<div class='container container-main'>
  <div class="col-content">
  </div>
  <div class='col-sidebar'>
    <div class='site-menu'>
      <ul class='tsd-small-nested-navigation' style='font-size: 20px;'></ul>
    </div>
  </div>
</div>
<script>

init()
let extracts = {}
let inprogress = ''

async function init() {
  extracts = await fetch('/docs/server/extracts.json').then(r => r.json()).catch(console.error)
  const routes = [
    {
      endpoint: 'healthcheck',
      test: '/src/test/health.unit.spec.js',
      request: {
        type: {},
      },
      response: {
        type: "HealthCheckResponse"
      }
    }
  ]
  const sidebarLinks = d3.select('.tsd-small-nested-navigation')
  const contentDiv = d3.select('.col-content')
  for(const r of routes) {
    r.id = r.endpoint.replace('/', '.')
    const section = contentDiv.append('div')
    
    sidebarLinks.append('li').append('a').attr('href', `#${r.id}`).html(r.endpoint)
    
    section.append('h2')
      .attr('id', r.id)
      .attr('class', 'tsd-page-title')
      .style('cursor', 'pointer')
      .html(`<span style='color:#aaa; font-weight: 200; margin-right: 3px'>/</span>${r.endpoint}`)
      .on('click', ()=>{window.location.hash = `#${r.id}`})

    
    if (r.test) {
      section.append('div').html(`CLI test: <span class='code-snippet'>exportsFilename=${r.test} npm run test:unit</span>`)
    }
    
    {
      const title = r.request.type
      const x = title in extracts ? extracts[title] : r.request.type
      section.append('h3').html('Request')
      if (x.comment) section.append('div').html(x.comment)
      const btnDiv =  section.append('div').style('position', 'relative')
      btnDiv.append('div')
        .style('position', 'absolute')
        .style('top', 0)
        .style('right', 0)
        .selectAll('button')
        .data([{label: 'expand'}, {label: 'collapse', callback: ()=>{}}])
        .enter()
        .append('button')
        .style('padding', '2px')
        .style('font-size', '12px')
        .html(d => d.label)
        .on('click', d => {
          inprogress = d.label
          clickables.each(simulateClick)
          inprogress = ''
        })

      section.append('div').attr('class', 'tsd-signature').append('div').html(JSON.stringify(r.request.type, null, '   '))
      const signature = section.append('div').html(x.signature)
      const clickables = signature.selectAll('.tsd-kind-type-alias').attr('href', `#${title}`).filter(function(){return this.innerHTML != title})
      clickables.on('click', mayExpand)
    }

    {
      const title = r.response.type
      const x = extracts[title]
      const resTitle = section.append('div').style('position', 'relative')
      const h3 = section.append('h3')
      h3.append('span').html('Response')
      if (title) {
        const url = `/docs/server/types/${title}.html`
        h3.append('span').attr('class', 'sjpp-h3link').html('full doc').on('click', ()=>{window.location = url})
      }
      if (x.comment) section.append('div').html(x.comment)
      const btnDiv =  section.append('div').style('position', 'relative')
      btnDiv.append('div')
        .style('position', 'absolute')
        .style('top', 0)
        .style('right', 0)
        .selectAll('button')
        .data([{label: 'expand'}, {label: 'collapse', callback: ()=>{}}])
        .enter()
        .append('button')
        .style('padding', '2px')
        .style('font-size', '12px')
        .html(d => d.label)
        .on('click', d => {
          inprogress = d.label
          clickables.each(simulateClick)
          inprogress = ''
        })

      const signature = section.append('div').html(x.signature)
      const clickables = signature.selectAll('.tsd-kind-type-alias').attr('href', `#${title}`).filter(function(){return this.innerHTML != title})
      clickables.on('click', mayExpand)
    }

    // use global function from nav.js
    detectCopyable(section)
  }
}

// must track the clicked and replaced DOM elements by DOM node;
// tracking the string keys may not be unique if the same type ID is used
// in multiple levels of a type declaration
const clicked = new WeakMap()
async function mayExpand(event) {
  const title = this.innerHTML
  const key = this;
  if (!clicked.has(key)) {
    const url = `/docs/server/types/${title}.html`
    const x = extracts[title]
    const div = document.createElement('div')
    d3.select(div).style('display', 'inline-block').style('vertical-align', 'top').html(x.signature)
    const obj = {div, parentNode: this.parentNode, title, orig: this, expanded: false}
    clicked.set(key, obj)
  }
  const c = clicked.get(key)
  if (c.expanded) {
    if (inprogress != 'expand') {
      c.parentNode.replaceChild(c.orig, c.div)
      c.expanded = false
    }
  } else if (inprogress != 'collapse') {
    c.parentNode.replaceChild(c.div, c.orig)
    c.expanded = true
    const signature = d3.select(c.div)
    const span = signature.select('.tsd-kind-type-alias')
    span.style('font-style', 'italic').style('cursor', 'pointer').html(title)
    const ns = span.node().nextSibling
    if (ns.innerHTML == ':') ns.innerHTML = ''
    clicked.set(span.node(), c)
    signature.selectAll('.tsd-signature').style('padding', 0).style('position', 'relative').style('top', 0).style('border', 'none')
    const clickables = signature.selectAll('.tsd-kind-type-alias').attr('href', `#${title}`)
    clickables.on('click', mayExpand)
    if (inprogress) clickables.each(simulateClick)
  }
  return false
}

function simulateClick(){
  mayExpand.call(this) 
}

</script>

<script src='/docs/nav.js'></script>
</body>
</html>
